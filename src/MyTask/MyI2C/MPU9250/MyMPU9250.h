//--------------------------------------------------------------------------------------------------
//  Project : Disturbing Information
//  Edition : WioTerminal with Extend multi LCD-Monitor
//  File path : src/MyTask/MyI2C/MPU9250/MyMPU9250.h
//  Copyright 2019, 2020, 2021, 2022, 2023 - OperonTeam
//--------------------------------------------------------------------------------------------------
#ifndef MYMPU9250_H
#define MYMPU9250_H

//--------------------------------------------------------------------------------------------------
// 外部参照・依存関係インクルード・ヘッダ情報
//--------------------------------------------------------------------------------------------------
#include <MPU9250.h>

//--------------------------------------------------------------------------------------------------
// ＩＭＵの姿勢状態について（二輪車で直進進行中の状態を想定した場合）
//	Sensor chip : MPU9250/6500
// 		+---------------+
//		|		FSYNC@	|					↑ Direction
//		| [ ]	NCS	 @	|					｜
//		|		INT  @	|
//		|		ADD  @--+----- +3.3v
//		|		ECL  @	|
//		|		EDA  @	|
//		|		SDA	 @--+----- SDA(I2C)
//		|		SCL  @--+----- SCL(I2C)
//		| [ ]	GND  @--+----- GND
//		|		VCC  @--+----- + 3.3v
//		+---------------+
//
//		・左右のバンク（傾斜角）は、IMU Roll値（水平の場合の値は0、右傾斜は+の値、左傾斜は-の値）
//		・加速時の前後姿勢は、IMU Pitch値（加速時が+)
//
// ・進行方向に対しシルク印刷のY方向を向け、チップ搭載面を上部水平に設置した場合に取得されるデータを記載する。
//	+---------------+---------------+---------------+-------+
//	|車両の姿勢状態	|	Roll (X)	| Pitch (y)		| Yaw	|
//	+===============+===============+===============+=======+
//	|停止・静止状態	| +180 or -180	|	+  0		|  TBD	|
//	+---------------+---------------+---------------+-------+
//	|左向き傾斜		|				|				|		|
//  |  姿勢の範囲	| +180 to + 90	|	TBD			|  TBD	|
//	|  フルバンク	|         + 90	|				|		|
//	+---------------+---------------+---------------+-------+
//	|右向き傾斜		|				|				|		|
//  |  姿勢の範囲	| -180 to - 90	|	TBD			|  TBD	|
//	|  フルバンク	|         - 90	|				|		|
//	+---------------+---------------+---------------+-------+
//  |加速中の状態	|				|				|		|
//  |  登坂の範囲	|	TBD			| +  0 to - 90	|  TBD	|
//	|  上直立状態	|				|         - 90	|		|
//	+---------------+---------------+---------------+-------+
//  |減速中の状態	|				|				|		|
//  |  下坂の範囲	|	TBD			| +  0 to + 90	|  TBD	|
//	|  下直立状態	|				|         + 90	|		|
//	+---------------+---------------+---------------+-------+
//  |進行方向(北)	|	TBD			|	TBD			|  +  0	| *北向きに0で補正した場合
//	+---------------+---------------+---------------+-------+
//  |進行方向(東)	|	TBD			|	TBD			|  - 90	|
//	+---------------+---------------+---------------+-------+
//  |進行方向(南)	|	TBD			|	TBD			|  -180	|
//	+---------------+---------------+---------------+-------+
//  |進行方向(西)	|	TBD			|	TBD			|  + 90	|
//	+---------------+---------------+---------------+-------+
//--------------------------------------------------------------------------------------------------
//--------------------------------------------------------------------------------------------------
// Ｉ２Ｃデバイス用クラス
//--------------------------------------------------------------------------------------------------
class   _MyMPU9250 : _MyI2CBase {
	protected:
		//------------------------------------------------------------------------------------------
		// ＩＭＵセンサー／６軸＋磁気センサー(MPU9250+6500)（外部）情報用
		//------------------------------------------------------------------------------------------
		MPU9250					MySensor;							// MPU9250
		MPU9250Setting			MyMPU9250Setting;					//

		//------------------------------------------------------------------------------------------
		// センサー情報の取り扱いメソッド
		//------------------------------------------------------------------------------------------
		VOID					MySensorBegin(_MyDevice *pMyDevice);
		VOID					MySensorUpdate(_MyDevice *pMyDevice);
		VOID					MySensorSetup(_MyDevice *pMyDevice);
		//---
		VOID					MyDump(CHAR *pszMsg);
	public:
		_MyMPU9250();
		~_MyMPU9250();
		//
		VOID					Begin(_MyDEV_ID MyDevID, UCHAR ucAddress, TwoWire *pTwoWire, _MyDevice *pMyDevice);
		VOID					Update(_MyDevice *pMyDevice);
};
#endif
/*-- End Of File --*/
